----------------------------------
TP01 - Automatización y scripting 
FAI - TUASSL
----------------------------------

-----------------------------------------------------------------------------
MANUAL DE REFERENCIA: "BEGINNING LINUX PROGRAMMING"
-----------------------------------------------------------------------------

1. ¿Dónde se encuentra bash ubicado en su sistema? 
   ¿De qué tipo es el archivo? 
   ¿Cuáles son sus permisos?

2. Liste todos los shells de su sistema. ¿De qué tipo de archivo son?
   (responda utilizando comandos para verificar su respuesta)
     
3. a) ¿Cómo saber cuál es el shell que estoy ejecutando al abrir una terminal o
      cuando me conecto a una consola?
   b) ¿Dónde se define el shell predeterminado para un usuario? 
   c) ¿Cómo puedo hacer para ejecutar un shell diferente?

4. Indique la diferencia entre info, man y help.

5. Obtenga la versión de bash que esta utilizando. 

6. ¿Cómo obtiene ayuda, en la terminal, acerca de las funcionalidades de bash?

7. Ejecute rbash o bash -r en su consola. ¿Puede explicar que sucede?. Amplíe 
   su respuesta usando man bash.

8. Algunos juegos y curiosidades
	8.1) Ejecute telnet towel.blinkenlights.nl ¿Explique con sus palabras 
             lo que sucede?
	8.2) Ejecute rev y a continuación escriba una palabra cualquiera ¿Que 
             sucede?
	8.3) Instale los siguientes juegos: cowsay y fortune (Ayuda: apt-get 
             install nbeDelPrograma). Luego ejecútelos por separado y explique 
             qué hace cada uno. 
        8.4) Según el principio del uso de flujo de texto que propone la 
             filosofía UNIX ¿cómo se le ocurre usar estos 2 programas en 
             conjunto?  
-----------------------------------------------------------------------------
Redirección y pipe
LEA LAS PÁGINAS 21 A 23 DEL MANUAL DE REFERENCIA. 
-----------------------------------------------------------------------------

El uso de la redirección y los pipes es fundamental en la construcción de 
scripts ya que, siguiendo la filosofía UNIX, nos permite combinar programas
para construir nuevas funcionalidades. En tal sentido es importante RECORDAR 
que existen tres descriptores de archivos frecuentemente utilizados y 
redireccionados dentro de un proceso (programa en ejecución): 

0 Entrada estándar (lo leído por un proceso)  
1 Salida estándar (lo escrito por un proceso durante un funcionamiento normal) 
2 Error estándar (lo escrito por un proceso cuando sucedió algún acontecimiento anormal)

Ejemplo: 
$ read palabra #<- en este caso la entrada estándar se espera desde la terminal.
ls | wc        #<- en este caso la salida estándar de ls será la entrada 
	       estándar de wc.  El error estándar de ambos comandos se dirige 
               a la terminal. 
¿Todos los programas reciben una entrada?


9. Explique el funcionamiento de las siguientes redirecciones. Indique además 
   cuál es la entrada, la salida y el error (si lo hubiera). 

	ls > archivo.txt 
	ls >> archivo.txt 
	ls archivoinexistente.txt > archivo.txt 
	ls archivoinexistente.txt > /dev/null
	ls archivoinexistente.txt > archivo.txt 2>&1
	ls archivoinexistente.txt &> archivo.txt 
	ls archivoinexistente.txt &> /dev/null 
	read palabra < archivocontexto.txt ; echo $palabra

El pipe es un mecanismo que permite vincular la entrada y salida de los 
procesos. De este modo lo escrito por un proceso es leído por el siguiente en 
la cadena de pipes. 

10. Explique el funcionamiento de los siguientes pipes. Indique cómo debiera 
    reemplazar cada sentencia si no existiera el pipe. 

	du -sh * |sort -h 
	ps -ef |grep root  
	ls -hl |grep root |sort -h -k 5  	
	df -h |grep /dev
	dpkg -l paquetenoexiste |grep -v dpkg  

En los casos que aparece el programa sort, ¿cómo sabemos sobre qué campo de la
salida se produce el ordenamiento? 

-----------------------------------------------------------------------------
OBSERVACIÓN: Filosofía UNIX vs. nuevas tendencias

La sentencias como la siguiente son frecuentes: 

	cat /etc/passwd |sort |uniq

El MISMO resultado se obtiene haciendo:

	sort -u /etc/passwd 

Ambas logran el mismo objetivo, y si bien la última utiliza un solo programa, 
la primera es más representativa de la filosofía UNIX y más portable ya que 
muchos UNIX pueden tener versiones de sort (más puristas) que no reciben 
archivos como argumentos, y sólo trabajan sobre flujos de texto; o pueden no
soportar la opción "-u". Evalúe según el ámbito y sus necesidades puntuales
el uso de una u otra opción. Generalice esta idea al resto de los programas. 
-----------------------------------------------------------------------------

11. Ejecute y explique : seq 5

¿Puede generar una secuencia que comience en el número 22 y termine en el 60?

12. Ejecute y explique : 
   echo {01..100}
   echo {15..25..5}

Nota: ver "Brace Expansion" (Expansión de llaves) - man bash, sección Expansión. 

¿Puede generar una secuencia que comience con 0022 y termine en el 0060?

13. Ejecute y explique: echo soy_{isaac,asimov}_escritor

14. Ejecute y explique : echo {z..a}

¿Puede generar la secuencia de letras desde la B (mayúscula) hasta
la Q?

¿Qué programa hace la expansión de las llaves en los ejercicios 12, 13 y 14?

-----------------------------------------------------------------------------
OBSERVACIÓN: es muy importante prestar atención a cuál es el 
programa que realiza la expansión de metacaracteres*. ¿Lo hace el shell o el 
programa que recibe la entrada? En este sentido, hay programas que aceptan 
el uso de metacaracteres para armar expresiones regulares. Por ejemplo, 

grep '^s.*e' /etc/passwd

Los metacaracteres que se encuentran entre las comillas simples son 
interpretados por grep y no por bash.  

*Se considera metacaracter a aquellos caracteres que tienen un significado no 
literal para el programa que los interpreta. 
-----------------------------------------------------------------------------

15. Ejecute y explique : 

echo "Esta es la salida de mi código a dos lugares distintos" | tee salida.txt

¿Para qué podría ser de utilidad el comando tee dentro de un script?

16. Ejecute y explique : 

seq 10 | xargs -n 2 

Encuentre al menos otros dos usos del programa xargs.  

17. Ejecute y explique :

	17.1) echo "linux" | tr a-z A-Z 

	17.2) Convertir cualquier palabra que contenga vocales en la misma 
              palabra pero reemplazando las vocales por números: Ejemplo: La 
              palabra abecedario  --> 4b3c3d4r10
	      IMPORTANTE: Debe respetar que cada vocal siempre se corresponda 
              con el mismo número.

18. Ejecute y explique :

echo "2 2 2 1 2 1 3 4 5 6 6" | tr " " "\n" | sort | uniq -u

19. Ejecute y explique : 

echo "a b c" > /tmp/uno
echo "d e f" > /tmp/dos
paste /tmp/uno /tmp/dos

20. a) Ejecute y explique :
       cat /etc/passwd |cut -f 3 -d:   

    b) ¿Puede listar el ID del usuario y su nombre completo y ordenar la lista
       de manera inversa?
    c) ¿La versión de cut que utiliza soporta trabajar sobre archivos 
       directamente? En caso afirmativo muestre un ejemplo, en caso contrario 
       justifique.

21. Ejecute y explique :

tac /etc/passwd 

¿Conoce algún programa que haga la operación inversa?

22. Ejecute y explique :

cat /etc/passwd |head -20 | tail -1

a) ¿Cuál es el objetivo de la sentencia anterior? 
b) ¿Cuántos programas utiliza?¿Puede hacer esto mismo con menos programas? 
   Generalice la solución para cualquier número de línea. 

